import{a as e,j as s}from"./index-LloLr1j0.js";import{r as o}from"./vendor-router-CPBz451Q.js";import{L as n}from"./LazyFigureCard-DGnFn0LP.js";import"./vendor-react-f9UUolb7.js";import"./FigureCard-D8qRhqQC.js";const r=["Scholars & Educators","Activists & Freedom Fighters","Political Leaders","Arts & Entertainment","Musicians","Inventors & Innovators","Athletes","Pan-African Leaders","Literary Icons","Business & Entrepreneurs"];function t({onLikeFigureClick:t,onSaveFigureClick:i,onLoginClick:c,savedFigures:l=[],currentUser:a}){const[m,p]=o.useState([]),[u,h]=o.useState(!0),[d,x]=o.useState(!1),[N,b]=o.useState(null),[j,E]=o.useState("all"),[v,f]=o.useState(8),T=o.useRef(null),[g,D]=o.useState(!1),[y,U]=o.useState(!0),V=o.useCallback(()=>{const e=T.current;if(!e)return;const{scrollLeft:s,scrollWidth:o,clientWidth:n}=e;D(s>10),U(s<o-n-10)},[]),k=o.useCallback(e=>{const s=T.current;if(!s)return;s.scrollBy({left:"left"===e?-200:200,behavior:"smooth"})},[]),w=o.useCallback(async e=>{const s=e._id||e.wikipediaId;p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:(e.likes||0)+1}:e));try{const o=await t(e);p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:o.likes,likedBy:o.likedBy}:e))}catch(o){p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:(e.likes||1)-1}:e))}},[t]),C=o.useMemo(()=>{if(!m.length)return{};const e=e=>{if(!e)return"";const s=e.trim().split(" ");return s[s.length-1].toLowerCase()},s=s=>[...s].sort((s,o)=>{const n=e(s.name),r=e(o.name);return n.localeCompare(r)}),o={all:s(m)};return r.forEach(e=>{const n=m.filter(s=>s.categories?.includes(e)||s.category===e);o[e]=s(n)}),o},[m]),L=o.useMemo(()=>(C[j]||[]).slice(0,v),[C,j,v]),F=o.useMemo(()=>{const e=C[j]||[];return v<e.length},[C,j,v]),S=o.useCallback(e=>{if(!e||!l)return!1;const s=e.wikipediaId||e._id;return l.some(e=>(e.wikipediaId||e._id)===s)},[l]),I=o.useCallback(e=>{if(!e||!a)return!1;return(e.likedBy||[]).includes(a._id)},[a]),M=o.useCallback(()=>{!d&&F&&(x(!0),setTimeout(()=>{f(e=>e+12),x(!1)},300))},[d,F]),_=o.useCallback(e=>{e!==j&&(E(e),f(8))},[j]);return o.useEffect(()=>{h(!0),b(null);const s=setTimeout(()=>{b("Request timed out. Please try again."),h(!1)},3e4);return e().then(e=>{clearTimeout(s),p(e),h(!1)}).catch(e=>{clearTimeout(s),b("Failed to load figures. Please check your connection and try again."),h(!1)}),()=>{clearTimeout(s)}},[]),s.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:s.jsxDEV("div",{className:"container mx-auto px-4 py-4 sm:py-6 md:py-8",children:[s.jsxDEV("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsxDEV("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4 text-gray-900",children:"Echoes Gallery"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:276,columnNumber:11},this),!u&&m.length>0&&s.jsxDEV("p",{className:"text-sm sm:text-base text-gray-600",children:["Explore ",m.length," inspiring figures from history."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:278,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:275,columnNumber:9},this),s.jsxDEV("div",{className:"mb-6 sm:mb-8 relative",children:[g&&s.jsxDEV("button",{onClick:()=>k("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 shadow-md rounded-full p-1.5 hover:bg-gray-100 transition-all","aria-label":"Scroll left",children:s.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:294,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:293,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:288,columnNumber:11},this),y&&s.jsxDEV("button",{onClick:()=>k("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 shadow-md rounded-full p-1.5 hover:bg-gray-100 transition-all","aria-label":"Scroll right",children:s.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:307,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:306,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:301,columnNumber:11},this),s.jsxDEV("div",{ref:T,onScroll:V,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0 scrollbar-hide",children:s.jsxDEV("div",{className:"inline-flex border-b border-gray-300 w-full min-w-max",children:[s.jsxDEV("button",{className:"px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center "+("all"===j?"text-secondary":"text-gray-500 hover:text-secondary"),onClick:()=>_("all"),children:[s.jsxDEV("span",{children:"All Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:326,columnNumber:15},this),!u&&s.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:C.all?.length||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:328,columnNumber:17},this),"all"===j&&s.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:333,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:318,columnNumber:13},this),r.map(e=>s.jsxDEV("button",{className:"px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center "+(j===e?"text-secondary":"text-gray-500 hover:text-secondary"),onClick:()=>_(e),children:[s.jsxDEV("span",{children:e},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:347,columnNumber:17},this),!u&&s.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:C[e]?.length||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:349,columnNumber:19},this),j===e&&s.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:354,columnNumber:19},this)]},e,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:338,columnNumber:15},this))]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:317,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:312,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:285,columnNumber:7},this),u&&s.jsxDEV("div",{className:"flex flex-col justify-center items-center h-64",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mb-4"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:365,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 font-medium",children:"Loading figures..."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:366,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a moment on first load"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:367,columnNumber:11},this),s.jsxDEV("div",{className:"mt-4 w-64 bg-gray-200 rounded-full h-2",children:s.jsxDEV("div",{className:"bg-secondary h-2 rounded-full animate-pulse",style:{width:"60%"}},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:369,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:368,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:364,columnNumber:9},this),N&&!u&&s.jsxDEV("div",{className:"text-center py-10 bg-red-50 rounded-lg border border-red-200",children:[s.jsxDEV("div",{className:"text-red-600 text-5xl mb-4",children:"‚ö†Ô∏è"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:377,columnNumber:11},this),s.jsxDEV("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Loading Failed"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:378,columnNumber:11},this),s.jsxDEV("p",{className:"text-red-600 mb-6 max-w-md mx-auto",children:N},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:379,columnNumber:11},this),s.jsxDEV("div",{className:"space-x-4",children:[s.jsxDEV("button",{onClick:()=>window.location.reload(),className:"bg-secondary text-dark px-6 py-2 rounded hover:bg-opacity-80 transition-colors font-medium",children:"Retry Loading"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:381,columnNumber:13},this),s.jsxDEV("button",{onClick:()=>{b(null),h(!0),e().then(p).catch(()=>b("Failed again"))},className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition-colors",children:"Try Again"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:387,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:380,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:376,columnNumber:9},this),!u&&!N&&0===m.length&&s.jsxDEV("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[s.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"üìö"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:404,columnNumber:11},this),s.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No figures found"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:405,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"There are no figures in the database yet. Check back later!"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:406,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:403,columnNumber:9},this),!u&&!N&&m.length>0&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:[L.map(e=>s.jsxDEV("div",{className:"mx-auto w-full max-w-sm",children:s.jsxDEV(n,{figure:e,onSaveFigureClick:()=>i(e),onLikeFigureClick:w,onLoginClick:c,isSaved:S(e),isLiked:I(e)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:418,columnNumber:17},this)},`${e._id||e.wikipediaId}-${e.category}`,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:417,columnNumber:15},this)),0===L.length&&s.jsxDEV("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg",children:[s.jsxDEV("div",{className:"text-gray-400 text-4xl mb-4",children:"üîç"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:432,columnNumber:17},this),s.jsxDEV("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"No figures in this category"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:433,columnNumber:17},this),s.jsxDEV("p",{className:"text-gray-500",children:"Try selecting a different category to explore more figures."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:434,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:431,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:415,columnNumber:11},this),F&&s.jsxDEV("div",{className:"text-center mt-6 sm:mt-8",children:s.jsxDEV("button",{onClick:M,disabled:d,className:"bg-secondary text-dark px-6 sm:px-8 py-3 rounded-lg hover:bg-opacity-80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-md text-sm sm:text-base min-h-[44px]",children:d?s.jsxDEV("span",{className:"flex items-center justify-center",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-dark mr-3"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:449,columnNumber:21},this),"Loading more..."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:448,columnNumber:19},this):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("span",{className:"hidden sm:inline",children:"Load More Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:454,columnNumber:21},this),s.jsxDEV("span",{className:"sm:hidden",children:"Load More"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:455,columnNumber:21},this),s.jsxDEV("span",{className:"ml-2 bg-dark bg-opacity-20 px-2 py-1 rounded text-xs sm:text-sm",children:[(C[j]?.length||0)-v," remaining"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:456,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:453,columnNumber:19},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:442,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:441,columnNumber:13},this),s.jsxDEV("div",{className:"text-center mt-6 space-y-2",children:[s.jsxDEV("div",{className:"text-sm text-gray-500",children:["Showing ",L.length," of ",C[j]?.length||0," figures","all"!==j&&` in ${j}`]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:467,columnNumber:13},this),s.jsxDEV("div",{className:"text-xs text-gray-400",children:["üí° Dev Mode: Total cached figures: ",m.length]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:472,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:466,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:414,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:273,columnNumber:7},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:272,columnNumber:5},this)}export{t as default};
