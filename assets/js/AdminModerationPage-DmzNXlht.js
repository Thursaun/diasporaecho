import{B as e,j as n}from"./index-C4YwNCFm.js";import{u as i,r as s}from"./vendor-router-o_Ipa-y7.js";import"./vendor-react-f9UUolb7.js";function o(){const o=i(),[t,r]=s.useState([]),[a,l]=s.useState(new Set),[m,c]=s.useState(!0),[d,p]=s.useState(null),[u,h]=s.useState(!1);s.useEffect(()=>{localStorage.getItem("token")||o("/")},[o]);const N=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),b=s.useCallback(async()=>{c(!0);try{const n=await fetch(`${e}/figures/admin/pending`,{headers:N()});if(403===n.status)return void p("Access denied. Admin privileges required.");if(!n.ok)throw new Error("Failed to fetch pending figures");const i=await n.json();r(i),p(null)}catch(n){p(n.message)}finally{c(!1)}},[]);s.useEffect(()=>{b()},[b]);return"Access denied. Admin privileges required."===d?n.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxDEV("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[n.jsxDEV("div",{className:"text-red-500 text-5xl mb-4",children:"üö´"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:172,columnNumber:11},this),n.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:173,columnNumber:11},this),n.jsxDEV("p",{className:"text-gray-600 mb-4",children:"You need admin privileges to access this page."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:174,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>o("/"),className:"px-4 py-2 bg-secondary text-white rounded-lg hover:bg-opacity-90",children:"Go Home"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:171,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:170,columnNumber:7},this):n.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[n.jsxDEV("div",{className:"bg-gradient-to-r from-secondary to-primary text-white py-6",children:n.jsxDEV("div",{className:"container mx-auto px-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{children:[n.jsxDEV("h1",{className:"text-2xl md:text-3xl font-bold",children:"üõ°Ô∏è Content Moderation"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:193,columnNumber:15},this),n.jsxDEV("p",{className:"text-white/80 mt-1",children:"Review and approve new figure submissions"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:194,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:192,columnNumber:13},this),n.jsxDEV("button",{onClick:()=>o("/"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition",children:"‚Üê Back to Site"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:196,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:191,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:190,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:189,columnNumber:7},this),n.jsxDEV("div",{className:"container mx-auto px-4 py-6",children:[n.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:n.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxDEV("div",{className:"flex items-center gap-3",children:[n.jsxDEV("span",{className:"text-gray-600 font-medium",children:[t.length," pending ‚Ä¢ ",a.size," selected"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:211,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{l(new Set(t.map(e=>e._id)))},className:"text-sm text-secondary hover:underline",disabled:0===t.length,children:"Select All"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:214,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{l(new Set)},className:"text-sm text-gray-500 hover:underline",disabled:0===a.size,children:"Deselect All"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:221,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:210,columnNumber:13},this),n.jsxDEV("div",{className:"flex items-center gap-3",children:[n.jsxDEV("button",{onClick:async()=>{if(0!==a.size){h(!0);try{const n=await fetch(`${e}/figures/admin/bulk-approve`,{method:"POST",headers:N(),body:JSON.stringify({ids:Array.from(a)})});if(!n.ok)throw new Error("Failed to bulk approve");const i=await n.json();alert(i.message),await b(),l(new Set)}catch(n){alert(n.message)}finally{h(!1)}}},disabled:0===a.size||u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:["‚úÖ Approve Selected (",a.size,")"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:230,columnNumber:15},this),n.jsxDEV("button",{onClick:async()=>{if(0===a.size)return;const n=prompt("Enter rejection reason (optional):");h(!0);try{const i=await fetch(`${e}/figures/admin/bulk-reject`,{method:"POST",headers:N(),body:JSON.stringify({ids:Array.from(a),reason:n})});if(!i.ok)throw new Error("Failed to bulk reject");const s=await i.json();alert(s.message),await b(),l(new Set)}catch(i){alert(i.message)}finally{h(!1)}},disabled:0===a.size||u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:["‚ùå Reject Selected (",a.size,")"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:237,columnNumber:15},this),n.jsxDEV("button",{onClick:b,disabled:m,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 transition",children:"üîÑ Refresh"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:229,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:209,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:208,columnNumber:9},this),m&&n.jsxDEV("div",{className:"flex justify-center py-12",children:n.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:258,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:257,columnNumber:11},this),d&&!m&&n.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:n.jsxDEV("p",{className:"text-red-600",children:d},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:265,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:264,columnNumber:11},this),!m&&!d&&0===t.length&&n.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[n.jsxDEV("div",{className:"text-6xl mb-4",children:"üéâ"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:272,columnNumber:13},this),n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"All caught up!"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:273,columnNumber:13},this),n.jsxDEV("p",{className:"text-gray-600",children:"No figures pending review."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:274,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:271,columnNumber:11},this),!m&&t.length>0&&n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>n.jsxDEV("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-2 transition "+(a.has(i._id)?"border-secondary":"border-transparent"),children:[n.jsxDEV("div",{className:"bg-gray-50 px-4 py-2 flex items-center gap-3 border-b",children:[n.jsxDEV("input",{type:"checkbox",checked:a.has(i._id),onChange:()=>{return e=i._id,void l(n=>{const i=new Set(n);return i.has(e)?i.delete(e):i.add(e),i});var e},className:"w-5 h-5 text-secondary rounded"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:290,columnNumber:19},this),n.jsxDEV("span",{className:"text-sm text-gray-500",children:new Date(i.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:296,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:289,columnNumber:17},this),n.jsxDEV("div",{className:"aspect-video bg-gray-100 relative",children:i.imageUrl?n.jsxDEV("img",{src:i.imageUrl,alt:i.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:304,columnNumber:21},this):n.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No Image"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:310,columnNumber:21},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:302,columnNumber:17},this),n.jsxDEV("div",{className:"p-4",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:i.name},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:318,columnNumber:19},this),n.jsxDEV("p",{className:"text-sm text-gray-500 mb-2",children:i.years||"Unknown dates"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:319,columnNumber:19},this),n.jsxDEV("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:i.description||"No description available"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:320,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxDEV("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:i.source||"Wikipedia"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:326,columnNumber:21},this),i.categories?.[0]&&n.jsxDEV("span",{className:"text-xs bg-secondary/10 text-secondary px-2 py-1 rounded",children:i.categories[0]},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:330,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:325,columnNumber:19},this),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:()=>(async n=>{h(!0);try{if(!(await fetch(`${e}/figures/admin/${n}/approve`,{method:"POST",headers:N()})).ok)throw new Error("Failed to approve");await b(),l(e=>{const i=new Set(e);return i.delete(n),i})}catch(i){alert(i.message)}finally{h(!1)}})(i._id),disabled:u,className:"flex-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 transition font-medium",children:"‚úÖ Approve"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:338,columnNumber:21},this),n.jsxDEV("button",{onClick:()=>{const n=prompt("Rejection reason (optional):");(async(n,i="")=>{h(!0);try{if(!(await fetch(`${e}/figures/admin/${n}/reject`,{method:"POST",headers:N(),body:JSON.stringify({reason:i})})).ok)throw new Error("Failed to reject");await b(),l(e=>{const i=new Set(e);return i.delete(n),i})}catch(s){alert(s.message)}finally{h(!1)}})(i._id,n||"")},disabled:u,className:"flex-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 transition font-medium",children:"‚ùå Reject"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:345,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:337,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:317,columnNumber:17},this)]},i._id,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:282,columnNumber:15},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:280,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:206,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:187,columnNumber:5},this)}export{o as default};
