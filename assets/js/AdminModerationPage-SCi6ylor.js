import{j as e}from"./index-D23deNTG.js";import{u as n,r as i}from"./vendor-router-o_Ipa-y7.js";import"./vendor-react-f9UUolb7.js";const s="http://localhost:3001/api";function o(){const o=n(),[t,r]=i.useState([]),[a,l]=i.useState(new Set),[m,c]=i.useState(!0),[d,p]=i.useState(null),[u,h]=i.useState(!1);i.useEffect(()=>{localStorage.getItem("token")||o("/")},[o]);const N=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),b=i.useCallback(async()=>{c(!0);try{const e=await fetch(`${s}/figures/admin/pending`,{headers:N()});if(403===e.status)return void p("Access denied. Admin privileges required.");if(!e.ok)throw new Error("Failed to fetch pending figures");const n=await e.json();r(n),p(null)}catch(e){p(e.message)}finally{c(!1)}},[]);i.useEffect(()=>{b()},[b]);return"Access denied. Admin privileges required."===d?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[e.jsxDEV("div",{className:"text-red-500 text-5xl mb-4",children:"üö´"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:175,columnNumber:11},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:176,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"You need admin privileges to access this page."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:177,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>o("/"),className:"px-4 py-2 bg-secondary text-white rounded-lg hover:bg-opacity-90",children:"Go Home"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:174,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:173,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-secondary to-primary text-white py-6",children:e.jsxDEV("div",{className:"container mx-auto px-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl md:text-3xl font-bold",children:"üõ°Ô∏è Content Moderation"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/80 mt-1",children:"Review and approve new figure submissions"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:195,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>o("/"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition",children:"‚Üê Back to Site"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:199,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:194,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:192,columnNumber:7},this),e.jsxDEV("div",{className:"container mx-auto px-4 py-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-gray-600 font-medium",children:[t.length," pending ‚Ä¢ ",a.size," selected"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:214,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{l(new Set(t.map(e=>e._id)))},className:"text-sm text-secondary hover:underline",disabled:0===t.length,children:"Select All"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:217,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{l(new Set)},className:"text-sm text-gray-500 hover:underline",disabled:0===a.size,children:"Deselect All"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:224,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:213,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:async()=>{if(0!==a.size){h(!0);try{const e=await fetch(`${s}/figures/admin/bulk-approve`,{method:"POST",headers:N(),body:JSON.stringify({ids:Array.from(a)})});if(!e.ok)throw new Error("Failed to bulk approve");const n=await e.json();alert(n.message),await b(),l(new Set)}catch(e){alert(e.message)}finally{h(!1)}}},disabled:0===a.size||u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:["‚úÖ Approve Selected (",a.size,")"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:233,columnNumber:15},this),e.jsxDEV("button",{onClick:async()=>{if(0===a.size)return;const e=prompt("Enter rejection reason (optional):");h(!0);try{const n=await fetch(`${s}/figures/admin/bulk-reject`,{method:"POST",headers:N(),body:JSON.stringify({ids:Array.from(a),reason:e})});if(!n.ok)throw new Error("Failed to bulk reject");const i=await n.json();alert(i.message),await b(),l(new Set)}catch(n){alert(n.message)}finally{h(!1)}},disabled:0===a.size||u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:["‚ùå Reject Selected (",a.size,")"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:240,columnNumber:15},this),e.jsxDEV("button",{onClick:b,disabled:m,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 transition",children:"üîÑ Refresh"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:247,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:212,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:211,columnNumber:9},this),m&&e.jsxDEV("div",{className:"flex justify-center py-12",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:261,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:260,columnNumber:11},this),d&&!m&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsxDEV("p",{className:"text-red-600",children:d},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:268,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:267,columnNumber:11},this),!m&&!d&&0===t.length&&e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsxDEV("div",{className:"text-6xl mb-4",children:"üéâ"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:275,columnNumber:13},this),e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"All caught up!"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:276,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600",children:"No figures pending review."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:277,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:274,columnNumber:11},this),!m&&t.length>0&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-2 transition "+(a.has(n._id)?"border-secondary":"border-transparent"),children:[e.jsxDEV("div",{className:"bg-gray-50 px-4 py-2 flex items-center gap-3 border-b",children:[e.jsxDEV("input",{type:"checkbox",checked:a.has(n._id),onChange:()=>{return e=n._id,void l(n=>{const i=new Set(n);return i.has(e)?i.delete(e):i.add(e),i});var e},className:"w-5 h-5 text-secondary rounded"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:293,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm text-gray-500",children:new Date(n.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:299,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:292,columnNumber:17},this),e.jsxDEV("div",{className:"aspect-video bg-gray-100 relative",children:n.imageUrl?e.jsxDEV("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:307,columnNumber:21},this):e.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No Image"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:313,columnNumber:21},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:305,columnNumber:17},this),e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:n.name},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:321,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mb-2",children:n.years||"Unknown dates"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:322,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:n.description||"No description available"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:323,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxDEV("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:n.source||"Wikipedia"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:329,columnNumber:21},this),n.categories?.[0]&&e.jsxDEV("span",{className:"text-xs bg-secondary/10 text-secondary px-2 py-1 rounded",children:n.categories[0]},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:333,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:328,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>(async e=>{h(!0);try{if(!(await fetch(`${s}/figures/admin/${e}/approve`,{method:"POST",headers:N()})).ok)throw new Error("Failed to approve");await b(),l(n=>{const i=new Set(n);return i.delete(e),i})}catch(n){alert(n.message)}finally{h(!1)}})(n._id),disabled:u,className:"flex-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 transition font-medium",children:"‚úÖ Approve"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:341,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>{const e=prompt("Rejection reason (optional):");(async(e,n="")=>{h(!0);try{if(!(await fetch(`${s}/figures/admin/${e}/reject`,{method:"POST",headers:N(),body:JSON.stringify({reason:n})})).ok)throw new Error("Failed to reject");await b(),l(n=>{const i=new Set(n);return i.delete(e),i})}catch(i){alert(i.message)}finally{h(!1)}})(n._id,e||"")},disabled:u,className:"flex-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 transition font-medium",children:"‚ùå Reject"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:348,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:340,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:320,columnNumber:17},this)]},n._id,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:285,columnNumber:15},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:283,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:209,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Admin/AdminModerationPage.jsx",lineNumber:190,columnNumber:5},this)}export{o as default};
