import{g as e,s as i,j as s}from"./index-DdfzxEM1.js";import{r as n,L as r}from"./vendor-router-CPBz451Q.js";import{g as o,F as t}from"./FigureCard-XD5eX0MO.js";import{L as a}from"./LazyFigureCard-BPs7kQlp.js";import"./vendor-react-f9UUolb7.js";function l({onSaveFigureClick:l,onLikeFigureClick:c,savedFigures:m,onLoginClick:p,currentUser:u}){const[d,h]=n.useState([]),[x,N]=n.useState(""),[b,j]=n.useState(!1),[v,g]=n.useState(null),[f,M]=n.useState([]),[T,D]=n.useState(!0),y=n.useRef(null),k=n.useMemo(()=>{if(!m||!Array.isArray(m))return new Map;const e=new Map;return m.forEach(i=>{const s=i.wikipediaId||i._id;s&&e.set(s,!0)}),e},[m]),w=n.useCallback(e=>{if(!e)return!1;const i=e.wikipediaId||e._id;return k.has(i)},[k]),E=n.useCallback(e=>{if(!e||!u)return!1;return(e.likedBy||[]).includes(u._id)},[u]),U=n.useCallback(async e=>{const i=e._id||e.wikipediaId;M(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||0)+1}:e)),h(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||0)+1}:e));try{const s=await c(e);M(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:s.likes,likedBy:s.likedBy}:e)),h(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:s.likes,likedBy:s.likedBy}:e))}catch(s){M(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||1)-1}:e)),h(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||1)-1}:e))}},[c]),V=n.useMemo(()=>f,[f]);n.useEffect(()=>{D(!0),e().then(e=>{M(e),D(!1),e.slice(0,3).forEach((e,i)=>{const s=document.createElement("link");s.rel="preload",s.as="image",s.href=o(e.imageUrl,400),s.fetchPriority=0===i?"high":"low",document.head.appendChild(s)})}).catch(e=>{D(!1)})},[]);const C=n.useCallback(e=>{!e||e.trim().length<2?h([]):(j(!0),g(null),i({query:e}).then(e=>{h(e),j(!1)}).catch(e=>{g("Failed to fetch search results. Please try again."),j(!1)}))},[]);n.useEffect(()=>(y.current&&clearTimeout(y.current),x&&x.trim().length>=2?y.current=setTimeout(()=>{C(x)},300):x||(h([]),j(!1)),()=>{y.current&&clearTimeout(y.current)}),[x,C]);const L=n.useCallback(e=>{e.preventDefault(),y.current&&clearTimeout(y.current),C(x)},[x,C]);return s.jsxDEV("main",{className:"min-h-screen bg-gray-50",children:[s.jsxDEV("section",{className:"bg-secondary text-white py-4 sm:py-6",children:s.jsxDEV("div",{className:"container mx-auto px-4 text-center",children:s.jsxDEV("form",{onSubmit:L,className:"flex flex-col sm:flex-row gap-3 max-w-2xl mx-auto",children:[s.jsxDEV("input",{type:"text",placeholder:"Search for historical figures...",className:"flex-grow p-3 sm:p-4 rounded-lg text-black text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-white/30",value:x,onChange:e=>N(e.target.value)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:216,columnNumber:13},this),s.jsxDEV("button",{type:"submit",className:"bg-dark text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg hover:bg-opacity-90 transition duration-300 font-semibold text-base sm:text-lg min-h-[44px]",disabled:b,children:b?"Searching...":"Search"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:223,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:212,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:211,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:210,columnNumber:7},this),s.jsxDEV("section",{className:"bg-white transition-all duration-500 "+(x?"py-4 sm:py-6":"py-8 sm:py-12 lg:py-16"),children:s.jsxDEV("div",{className:"container mx-auto px-4",children:[s.jsxDEV("div",{className:"text-center transition-all duration-500 "+(x?"mb-3 sm:mb-4":"mb-6 sm:mb-8 lg:mb-12"),children:[s.jsxDEV("h2",{className:"font-bold text-gray-900 transition-all duration-500 "+(x?"text-base sm:text-lg md:text-xl mb-1 sm:mb-2":"text-2xl sm:text-3xl md:text-4xl mb-3 sm:mb-4"),children:"Featured Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:237,columnNumber:13},this),s.jsxDEV("div",{className:"bg-gradient-to-r from-secondary to-primary mx-auto transition-all duration-500 "+(x?"w-16 sm:w-20 h-px mb-1 sm:mb-2":"w-48 sm:w-64 md:w-72 h-1 mb-3 sm:mb-4")},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:240,columnNumber:13},this),!x&&s.jsxDEV("p",{className:"text-sm sm:text-base lg:text-lg text-gray-600 max-w-2xl mx-auto px-4",children:"Discover the most celebrated figures whose stories continue to inspire and educate"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:242,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:236,columnNumber:11},this),T?s.jsxDEV("div",{className:"flex justify-center items-center py-12",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:250,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:249,columnNumber:13},this):s.jsxDEV("div",{className:"grid transition-all duration-500 "+(x?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8"),children:V.map((e,i)=>s.jsxDEV("div",{className:`transform transition-all duration-300 ${x?"":"hover:scale-105"} mx-auto w-full max-w-sm`,children:s.jsxDEV("div",{className:"relative",children:s.jsxDEV(t,{figure:e,onLikeFigureClick:U,onSaveFigureClick:l,onLoginClick:p,isSaved:w(e),isLiked:E(e),priority:!0,badge:!x&&i<3?s.jsxDEV("div",{className:"px-3 py-1 rounded-full text-white text-xs font-bold shadow-lg "+(0===i?"bg-yellow-500":1===i?"bg-gray-400":"bg-orange-500"),children:0===i?"ðŸ¥‡ Most Liked":1===i?"ðŸ¥ˆ Popular":"ðŸ¥‰ Featured"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:275,columnNumber:25},this):null},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:266,columnNumber:21},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:265,columnNumber:19},this)},e._id,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:259,columnNumber:17},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:253,columnNumber:13},this),!x&&s.jsxDEV("div",{className:"text-center mt-8 sm:mt-12",children:s.jsxDEV(r,{to:"/echoes",className:"inline-flex items-center px-6 sm:px-8 py-3 sm:py-4 bg-secondary text-white rounded-lg hover:bg-opacity-90 transition duration-300 font-semibold text-base sm:text-lg min-h-[44px]",children:["Explore All Figures",s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2",children:[s.jsxDEV("path",{d:"M5 12h14"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:300,columnNumber:19},this),s.jsxDEV("path",{d:"M12 5l7 7-7 7"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:299,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:294,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:235,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:234,columnNumber:7},this),x&&s.jsxDEV("section",{className:"py-4 sm:py-6 bg-gray-50",children:s.jsxDEV("div",{className:"container mx-auto px-4",children:[s.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[s.jsxDEV("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Search Results"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:313,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs sm:text-sm text-gray-600",children:d.length>0?`Found ${d.length} result${1!==d.length?"s":""} for "${x}"`:`Searching for "${x}"...`},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:316,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:312,columnNumber:13},this),b&&s.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mb-4"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:326,columnNumber:17},this),s.jsxDEV("p",{className:"text-gray-500",children:"Searching through our collection..."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:327,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:325,columnNumber:15},this),v&&s.jsxDEV("div",{className:"text-center py-12",children:s.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto text-red-500 mb-4",children:[s.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:335,columnNumber:21},this),s.jsxDEV("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:336,columnNumber:21},this),s.jsxDEV("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:337,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:334,columnNumber:19},this),s.jsxDEV("p",{className:"text-red-600 font-medium",children:v},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:339,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:333,columnNumber:17},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:332,columnNumber:15},this),0===d.length&&!b&&!v&&x&&s.jsxDEV("div",{className:"text-center py-12",children:s.jsxDEV("div",{className:"bg-gray-100 rounded-lg p-8 max-w-md mx-auto",children:[s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto text-gray-400 mb-4",children:[s.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:348,columnNumber:21},this),s.jsxDEV("path",{d:"M21 21l-4.35-4.35"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:349,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:347,columnNumber:19},this),s.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No results found"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:351,columnNumber:19},this),s.jsxDEV("p",{className:"text-gray-600 mb-4",children:['No results found for "',s.jsxDEV("span",{className:"font-medium",children:x},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:353,columnNumber:48},this),'"']},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:352,columnNumber:19},this),s.jsxDEV("p",{className:"text-sm text-gray-500",children:"Try different keywords or explore our featured figures above"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:355,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:346,columnNumber:17},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:345,columnNumber:15},this),d.length>0&&!b&&s.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:d.map(e=>s.jsxDEV("div",{className:"mx-auto w-full max-w-sm",children:s.jsxDEV(a,{figure:e,onLikeFigureClick:U,onSaveFigureClick:l,onLoginClick:p,isSaved:w(e),isLiked:E(e)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:366,columnNumber:21},this)},e.wikipediaId||e._id||`temp-${Date.now()}`,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:365,columnNumber:19},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:363,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:311,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:310,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:209,columnNumber:5},this)}export{l as default};
