import{g as e,s as i,j as s}from"./index-brZG8XdQ.js";import{r as n,L as r}from"./vendor-router-CPBz451Q.js";import{F as o}from"./FigureCard-CSQNYpui.js";import{L as t}from"./LazyFigureCard-3pccRr5L.js";import"./vendor-react-f9UUolb7.js";function a({onSaveFigureClick:a,onLikeFigureClick:l,savedFigures:c,onLoginClick:m,currentUser:p}){const[u,d]=n.useState([]),[h,x]=n.useState(""),[N,b]=n.useState(!1),[j,v]=n.useState(null),[g,f]=n.useState([]),[M,T]=n.useState(!0),D=n.useRef(null),y=n.useMemo(()=>{if(!c||!Array.isArray(c))return new Map;const e=new Map;return c.forEach(i=>{const s=i.wikipediaId||i._id;s&&e.set(s,!0)}),e},[c]),k=n.useCallback(e=>{if(!e)return!1;const i=e.wikipediaId||e._id;return y.has(i)},[y]),w=n.useCallback(e=>{if(!e||!p)return!1;return(e.likedBy||[]).includes(p._id)},[p]),E=n.useCallback(async e=>{const i=e._id||e.wikipediaId;f(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||0)+1}:e)),d(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||0)+1}:e));try{const s=await l(e);f(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:s.likes,likedBy:s.likedBy}:e)),d(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:s.likes,likedBy:s.likedBy}:e))}catch(s){f(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||1)-1}:e)),d(e=>e.map(e=>(e._id||e.wikipediaId)===i?{...e,likes:(e.likes||1)-1}:e))}},[l]),U=n.useMemo(()=>g,[g]);n.useEffect(()=>{T(!0),e().then(e=>{f(e),T(!1),e.slice(0,3).forEach((e,i)=>{const s=document.createElement("link");s.rel="preload",s.as="image",s.href=e.imageUrl,s.fetchPriority=0===i?"high":"low",document.head.appendChild(s)})}).catch(e=>{T(!1)})},[]);const V=n.useCallback(e=>{!e||e.trim().length<2?d([]):(b(!0),v(null),i({query:e}).then(e=>{d(e),b(!1)}).catch(e=>{v("Failed to fetch search results. Please try again."),b(!1)}))},[]);n.useEffect(()=>(D.current&&clearTimeout(D.current),h&&h.trim().length>=2?D.current=setTimeout(()=>{V(h)},300):h||(d([]),b(!1)),()=>{D.current&&clearTimeout(D.current)}),[h,V]);const C=n.useCallback(e=>{e.preventDefault(),D.current&&clearTimeout(D.current),V(h)},[h,V]);return s.jsxDEV("main",{className:"min-h-screen bg-gray-50",children:[s.jsxDEV("section",{className:"bg-secondary text-white py-4 sm:py-6",children:s.jsxDEV("div",{className:"container mx-auto px-4 text-center",children:s.jsxDEV("form",{onSubmit:C,className:"flex flex-col sm:flex-row gap-3 max-w-2xl mx-auto",children:[s.jsxDEV("input",{type:"text",placeholder:"Search for historical figures...",className:"flex-grow p-3 sm:p-4 rounded-lg text-black text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-white/30",value:h,onChange:e=>x(e.target.value)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:215,columnNumber:13},this),s.jsxDEV("button",{type:"submit",className:"bg-dark text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg hover:bg-opacity-90 transition duration-300 font-semibold text-base sm:text-lg min-h-[44px]",disabled:N,children:N?"Searching...":"Search"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:222,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:211,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:210,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:209,columnNumber:7},this),s.jsxDEV("section",{className:"bg-white transition-all duration-500 "+(h?"py-4 sm:py-6":"py-8 sm:py-12 lg:py-16"),children:s.jsxDEV("div",{className:"container mx-auto px-4",children:[s.jsxDEV("div",{className:"text-center transition-all duration-500 "+(h?"mb-3 sm:mb-4":"mb-6 sm:mb-8 lg:mb-12"),children:[s.jsxDEV("h2",{className:"font-bold text-gray-900 transition-all duration-500 "+(h?"text-base sm:text-lg md:text-xl mb-1 sm:mb-2":"text-2xl sm:text-3xl md:text-4xl mb-3 sm:mb-4"),children:"Featured Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:236,columnNumber:13},this),s.jsxDEV("div",{className:"bg-gradient-to-r from-secondary to-primary mx-auto transition-all duration-500 "+(h?"w-16 sm:w-20 h-px mb-1 sm:mb-2":"w-48 sm:w-64 md:w-72 h-1 mb-3 sm:mb-4")},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:239,columnNumber:13},this),!h&&s.jsxDEV("p",{className:"text-sm sm:text-base lg:text-lg text-gray-600 max-w-2xl mx-auto px-4",children:"Discover the most celebrated figures whose stories continue to inspire and educate"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:241,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:235,columnNumber:11},this),M?s.jsxDEV("div",{className:"flex justify-center items-center py-12",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:249,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:248,columnNumber:13},this):s.jsxDEV("div",{className:"grid transition-all duration-500 "+(h?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8"),children:U.map((e,i)=>s.jsxDEV("div",{className:`transform transition-all duration-300 ${h?"":"hover:scale-105"} mx-auto w-full max-w-sm`,children:s.jsxDEV("div",{className:"relative",children:[!h&&i<3&&s.jsxDEV("div",{className:"absolute -top-2 -right-2 z-10",children:s.jsxDEV("div",{className:"px-3 py-1 rounded-full text-white text-xs font-bold shadow-lg "+(0===i?"bg-yellow-500":1===i?"bg-gray-400":"bg-orange-500"),children:0===i?"ðŸ¥‡ Most Liked":1===i?"ðŸ¥ˆ Popular":"ðŸ¥‰ Featured"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:267,columnNumber:25},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:266,columnNumber:23},this),s.jsxDEV(o,{figure:e,onLikeFigureClick:E,onSaveFigureClick:a,onLoginClick:m,isSaved:k(e),isLiked:w(e),priority:!0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:264,columnNumber:19},this)},e._id,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:258,columnNumber:17},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:252,columnNumber:13},this),!h&&s.jsxDEV("div",{className:"text-center mt-8 sm:mt-12",children:s.jsxDEV(r,{to:"/echoes",className:"inline-flex items-center px-6 sm:px-8 py-3 sm:py-4 bg-secondary text-white rounded-lg hover:bg-opacity-90 transition duration-300 font-semibold text-base sm:text-lg min-h-[44px]",children:["Explore All Figures",s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2",children:[s.jsxDEV("path",{d:"M5 12h14"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:301,columnNumber:19},this),s.jsxDEV("path",{d:"M12 5l7 7-7 7"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:302,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:300,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:295,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:294,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:234,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:233,columnNumber:7},this),h&&s.jsxDEV("section",{className:"py-4 sm:py-6 bg-gray-50",children:s.jsxDEV("div",{className:"container mx-auto px-4",children:[s.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[s.jsxDEV("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Search Results"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:314,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs sm:text-sm text-gray-600",children:u.length>0?`Found ${u.length} result${1!==u.length?"s":""} for "${h}"`:`Searching for "${h}"...`},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:317,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:313,columnNumber:13},this),N&&s.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mb-4"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:327,columnNumber:17},this),s.jsxDEV("p",{className:"text-gray-500",children:"Searching through our collection..."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:328,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:326,columnNumber:15},this),j&&s.jsxDEV("div",{className:"text-center py-12",children:s.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto text-red-500 mb-4",children:[s.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:336,columnNumber:21},this),s.jsxDEV("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:337,columnNumber:21},this),s.jsxDEV("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:338,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:335,columnNumber:19},this),s.jsxDEV("p",{className:"text-red-600 font-medium",children:j},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:340,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:334,columnNumber:17},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:333,columnNumber:15},this),0===u.length&&!N&&!j&&h&&s.jsxDEV("div",{className:"text-center py-12",children:s.jsxDEV("div",{className:"bg-gray-100 rounded-lg p-8 max-w-md mx-auto",children:[s.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto text-gray-400 mb-4",children:[s.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:349,columnNumber:21},this),s.jsxDEV("path",{d:"M21 21l-4.35-4.35"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:348,columnNumber:19},this),s.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No results found"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:352,columnNumber:19},this),s.jsxDEV("p",{className:"text-gray-600 mb-4",children:['No results found for "',s.jsxDEV("span",{className:"font-medium",children:h},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:354,columnNumber:48},this),'"']},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:353,columnNumber:19},this),s.jsxDEV("p",{className:"text-sm text-gray-500",children:"Try different keywords or explore our featured figures above"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:356,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:347,columnNumber:17},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:346,columnNumber:15},this),u.length>0&&!N&&s.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:u.map(e=>s.jsxDEV("div",{className:"mx-auto w-full max-w-sm",children:s.jsxDEV(t,{figure:e,onLikeFigureClick:E,onSaveFigureClick:a,onLoginClick:m,isSaved:k(e),isLiked:w(e)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:367,columnNumber:21},this)},e.wikipediaId||e._id||`temp-${Date.now()}`,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:366,columnNumber:19},this))},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:312,columnNumber:11},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:311,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Main/Main.jsx",lineNumber:208,columnNumber:5},this)}export{a as default};
