import{a as e,j as s}from"./index-brZG8XdQ.js";import{r as o}from"./vendor-router-CPBz451Q.js";import{L as n}from"./LazyFigureCard-3pccRr5L.js";import"./vendor-react-f9UUolb7.js";import"./FigureCard-CSQNYpui.js";const r=["Intellectuals Leaders","Civil Rights Activists","Political Leaders","Educators & Scholars","Arts, Culture & Entertainment","Inventors & Innovators","Athletic Icons","Freedom Fighters","Pan-African Leaders","Literary Icons"];function i({onLikeFigureClick:i,onSaveFigureClick:t,onLoginClick:c,savedFigures:l=[],currentUser:a}){const[m,p]=o.useState([]),[d,u]=o.useState(!0),[h,x]=o.useState(!1),[N,b]=o.useState(null),[j,E]=o.useState("all"),[v,T]=o.useState(8),f=o.useCallback(async e=>{const s=e._id||e.wikipediaId;p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:(e.likes||0)+1}:e));try{const o=await i(e);p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:o.likes,likedBy:o.likedBy}:e))}catch(o){p(e=>e.map(e=>(e._id||e.wikipediaId)===s?{...e,likes:(e.likes||1)-1}:e))}},[i]),g=o.useMemo(()=>{if(!m.length)return{};const e={all:m};return r.forEach(s=>{e[s]=m.filter(e=>e.category===s)}),e},[m]),D=o.useMemo(()=>(g[j]||[]).slice(0,v),[g,j,v]),y=o.useMemo(()=>{const e=g[j]||[];return v<e.length},[g,j,v]),U=o.useCallback(e=>{if(!e||!l)return!1;const s=e.wikipediaId||e._id;return l.some(e=>(e.wikipediaId||e._id)===s)},[l]),V=o.useCallback(e=>{if(!e||!a)return!1;return(e.likedBy||[]).includes(a._id)},[a]),k=o.useCallback(()=>{!h&&y&&(x(!0),setTimeout(()=>{T(e=>e+12),x(!1)},300))},[h,y]),w=o.useCallback(e=>{e!==j&&(E(e),T(8))},[j]);return o.useEffect(()=>{u(!0),b(null);const s=setTimeout(()=>{b("Request timed out. Please try again."),u(!1)},3e4);return e().then(e=>{clearTimeout(s),p(e),u(!1)}).catch(e=>{clearTimeout(s),b("Failed to load figures. Please check your connection and try again."),u(!1)}),()=>{clearTimeout(s)}},[]),s.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:s.jsxDEV("div",{className:"container mx-auto px-4 py-4 sm:py-6 md:py-8",children:[s.jsxDEV("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsxDEV("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4 text-gray-900",children:"Echoes Gallery"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:228,columnNumber:11},this),!d&&m.length>0&&s.jsxDEV("p",{className:"text-sm sm:text-base text-gray-600",children:["Explore ",m.length," inspiring figures from history."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:230,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:227,columnNumber:9},this),s.jsxDEV("div",{className:"mb-6 sm:mb-8 overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:s.jsxDEV("div",{className:"inline-flex border-b border-gray-300 w-full min-w-max",children:[s.jsxDEV("button",{className:"px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center "+("all"===j?"text-secondary":"text-gray-500 hover:text-secondary"),onClick:()=>w("all"),children:[s.jsxDEV("span",{children:"All Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:247,columnNumber:13},this),!d&&s.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:g.all?.length||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:249,columnNumber:15},this),"all"===j&&s.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:239,columnNumber:11},this),r.map(e=>s.jsxDEV("button",{className:"px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center "+(j===e?"text-secondary":"text-gray-500 hover:text-secondary"),onClick:()=>w(e),children:[s.jsxDEV("span",{children:e},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:268,columnNumber:15},this),!d&&s.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:g[e]?.length||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:270,columnNumber:17},this),j===e&&s.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:275,columnNumber:17},this)]},e,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:259,columnNumber:13},this))]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:238,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:237,columnNumber:7},this),d&&s.jsxDEV("div",{className:"flex flex-col justify-center items-center h-64",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mb-4"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:285,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 font-medium",children:"Loading figures..."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:286,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a moment on first load"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:287,columnNumber:11},this),s.jsxDEV("div",{className:"mt-4 w-64 bg-gray-200 rounded-full h-2",children:s.jsxDEV("div",{className:"bg-secondary h-2 rounded-full animate-pulse",style:{width:"60%"}},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:289,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:288,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:284,columnNumber:9},this),N&&!d&&s.jsxDEV("div",{className:"text-center py-10 bg-red-50 rounded-lg border border-red-200",children:[s.jsxDEV("div",{className:"text-red-600 text-5xl mb-4",children:"‚ö†Ô∏è"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:297,columnNumber:11},this),s.jsxDEV("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Loading Failed"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:298,columnNumber:11},this),s.jsxDEV("p",{className:"text-red-600 mb-6 max-w-md mx-auto",children:N},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:299,columnNumber:11},this),s.jsxDEV("div",{className:"space-x-4",children:[s.jsxDEV("button",{onClick:()=>window.location.reload(),className:"bg-secondary text-dark px-6 py-2 rounded hover:bg-opacity-80 transition-colors font-medium",children:"Retry Loading"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:301,columnNumber:13},this),s.jsxDEV("button",{onClick:()=>{b(null),u(!0),e().then(p).catch(()=>b("Failed again"))},className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition-colors",children:"Try Again"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:307,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:300,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:296,columnNumber:9},this),!d&&!N&&0===m.length&&s.jsxDEV("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[s.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"üìö"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:324,columnNumber:11},this),s.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No figures found"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:325,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"There are no figures in the database yet. Check back later!"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:326,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:323,columnNumber:9},this),!d&&!N&&m.length>0&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:[D.map(e=>s.jsxDEV("div",{className:"mx-auto w-full max-w-sm",children:s.jsxDEV(n,{figure:e,onSaveFigureClick:()=>t(e),onLikeFigureClick:f,onLoginClick:c,isSaved:U(e),isLiked:V(e)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:338,columnNumber:17},this)},`${e._id||e.wikipediaId}-${e.category}`,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:337,columnNumber:15},this)),0===D.length&&s.jsxDEV("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg",children:[s.jsxDEV("div",{className:"text-gray-400 text-4xl mb-4",children:"üîç"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:352,columnNumber:17},this),s.jsxDEV("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"No figures in this category"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:353,columnNumber:17},this),s.jsxDEV("p",{className:"text-gray-500",children:"Try selecting a different category to explore more figures."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:354,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:351,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:335,columnNumber:11},this),y&&s.jsxDEV("div",{className:"text-center mt-6 sm:mt-8",children:s.jsxDEV("button",{onClick:k,disabled:h,className:"bg-secondary text-dark px-6 sm:px-8 py-3 rounded-lg hover:bg-opacity-80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-md text-sm sm:text-base min-h-[44px]",children:h?s.jsxDEV("span",{className:"flex items-center justify-center",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-dark mr-3"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:369,columnNumber:21},this),"Loading more..."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:368,columnNumber:19},this):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("span",{className:"hidden sm:inline",children:"Load More Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:374,columnNumber:21},this),s.jsxDEV("span",{className:"sm:hidden",children:"Load More"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:375,columnNumber:21},this),s.jsxDEV("span",{className:"ml-2 bg-dark bg-opacity-20 px-2 py-1 rounded text-xs sm:text-sm",children:[(g[j]?.length||0)-v," remaining"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:376,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:373,columnNumber:19},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:362,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:361,columnNumber:13},this),s.jsxDEV("div",{className:"text-center mt-6 space-y-2",children:[s.jsxDEV("div",{className:"text-sm text-gray-500",children:["Showing ",D.length," of ",g[j]?.length||0," figures","all"!==j&&` in ${j}`]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:387,columnNumber:13},this),s.jsxDEV("div",{className:"text-xs text-gray-400",children:["üí° Dev Mode: Total cached figures: ",m.length]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:392,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:334,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:225,columnNumber:7},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:224,columnNumber:5},this)}export{i as default};
