import{a as k,j as e}from"./index-DarJCK46.js";import{b as n}from"./vendor-DkSc4EIR.js";import{L as R}from"./LazyFigureCard-COEjD8Pa.js";import"./FigureCard-CT4QHbtj.js";const w=["Intellectuals Leaders","Civil Rights Activists","Political Leaders","Educators & Scholars","Arts, Culture & Entertainment","Inventors & Innovators","Athletic Icons","Freedom Fighters","Pan-African Leaders","Literary Icons"],P=12,I=8;function O({onLikeFigureClick:v,onSaveFigureClick:C,onLoginClick:F,savedFigures:b=[],currentUser:E}){var y,V,U;const[i,p]=n.useState([]),[m,u]=n.useState(!0),[x,g]=n.useState(!1),[N,d]=n.useState(null),[t,L]=n.useState("all"),[h,T]=n.useState(I),$=n.useCallback(async s=>{const o=s._id||s.wikipediaId;console.log(`üéØ Echoes handleLikeClick: ${s.name} (current likes: ${s.likes})`),p(r=>r.map(l=>(l._id||l.wikipediaId)===o?{...l,likes:(l.likes||0)+1}:l));try{const r=await v(s);console.log(`‚úÖ Server like successful for ${s.name}, new count: ${r.likes}`),p(l=>l.map(c=>(c._id||c.wikipediaId)===o?{...c,likes:r.likes,likedBy:r.likedBy}:c))}catch(r){console.error("‚ùå Like action failed:",r),p(l=>l.map(c=>(c._id||c.wikipediaId)===o?{...c,likes:(c.likes||1)-1}:c))}},[v]),a=n.useMemo(()=>{if(!i.length)return{};console.log("üîÑ Recalculating categorized figures...");const s={all:i};return w.forEach(o=>{s[o]=i.filter(r=>r.category===o)}),console.log("‚úÖ Categorized figures calculated:",Object.keys(s).map(o=>`${o}: ${s[o].length}`)),s},[i]),j=n.useMemo(()=>{const s=a[t]||[],o=s.slice(0,h);return console.log(`üìä Displaying ${o.length} of ${s.length} figures in category: ${t}`),o},[a,t,h]),f=n.useMemo(()=>{const s=a[t]||[];return h<s.length},[a,t,h]),S=n.useCallback(s=>{if(!s||!b)return!1;const o=s.wikipediaId||s._id;return b.some(r=>(r.wikipediaId||r._id)===o)},[b]),A=n.useCallback(s=>!s||!E?!1:(s.likedBy||[]).includes(E._id),[E]),_=n.useCallback(()=>{x||!f||(console.log("üì• Loading more figures..."),g(!0),setTimeout(()=>{T(s=>{const o=s+P;return console.log(`üìà Display count increased from ${s} to ${o}`),o}),g(!1)},300))},[x,f]),D=n.useCallback(s=>{s!==t&&(console.log(`üîÑ Switching category from ${t} to ${s}`),L(s),T(I))},[t]);return n.useEffect(()=>{console.log("üöÄ Starting figure fetch..."),u(!0),d(null);const s=setTimeout(()=>{console.warn("‚ö†Ô∏è Request timeout reached"),d("Request timed out. Please try again."),u(!1)},3e4);return k().then(o=>{clearTimeout(s),console.log("‚úÖ Figures fetched successfully:",o.length,"figures"),p(o),u(!1)}).catch(o=>{clearTimeout(s),console.error("‚ùå Error fetching figures:",o),d("Failed to load figures. Please check your connection and try again."),u(!1)}),()=>{clearTimeout(s)}},[]),e.jsxDEV("div",{className:"container mx-auto px-4 py-4 sm:py-6 md:py-8",children:[e.jsxDEV("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxDEV("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4",children:"Echoes Gallery"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:227,columnNumber:9},this),!m&&i.length>0&&e.jsxDEV("p",{className:"text-sm sm:text-base text-gray-600",children:["Explore ",i.length," inspiring figures from history."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:229,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:226,columnNumber:7},this),e.jsxDEV("div",{className:"mb-6 sm:mb-8 overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxDEV("div",{className:"inline-flex border-b border-gray-300 w-full min-w-max",children:[e.jsxDEV("button",{className:`px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center ${t==="all"?"text-secondary":"text-gray-500 hover:text-secondary"}`,onClick:()=>D("all"),children:[e.jsxDEV("span",{children:"All Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:246,columnNumber:13},this),!m&&e.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:((y=a.all)==null?void 0:y.length)||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:248,columnNumber:15},this),t==="all"&&e.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:238,columnNumber:11},this),w.map(s=>{var o;return e.jsxDEV("button",{className:`px-3 sm:px-4 md:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium relative whitespace-nowrap transition-colors duration-200 min-h-[44px] flex items-center ${t===s?"text-secondary":"text-gray-500 hover:text-secondary"}`,onClick:()=>D(s),children:[e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:267,columnNumber:15},this),!m&&e.jsxDEV("span",{className:"ml-1 sm:ml-2 bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs",children:((o=a[s])==null?void 0:o.length)||0},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:269,columnNumber:17},this),t===s&&e.jsxDEV("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-secondary"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:274,columnNumber:17},this)]},s,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:258,columnNumber:13},this)})]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:237,columnNumber:9},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:236,columnNumber:7},this),m&&e.jsxDEV("div",{className:"flex flex-col justify-center items-center h-64",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mb-4"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:284,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 font-medium",children:"Loading figures..."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:285,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a moment on first load"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:286,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 w-64 bg-gray-200 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-secondary h-2 rounded-full animate-pulse",style:{width:"60%"}},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:288,columnNumber:13},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:287,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:283,columnNumber:9},this),N&&!m&&e.jsxDEV("div",{className:"text-center py-10 bg-red-50 rounded-lg border border-red-200",children:[e.jsxDEV("div",{className:"text-red-600 text-5xl mb-4",children:"‚ö†Ô∏è"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:296,columnNumber:11},this),e.jsxDEV("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Loading Failed"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:297,columnNumber:11},this),e.jsxDEV("p",{className:"text-red-600 mb-6 max-w-md mx-auto",children:N},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:298,columnNumber:11},this),e.jsxDEV("div",{className:"space-x-4",children:[e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"bg-secondary text-dark px-6 py-2 rounded hover:bg-opacity-80 transition-colors font-medium",children:"Retry Loading"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:300,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>{d(null),u(!0),k().then(p).catch(()=>d("Failed again"))},className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition-colors",children:"Try Again"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:306,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:299,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:295,columnNumber:9},this),!m&&!N&&i.length===0&&e.jsxDEV("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"üìö"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:323,columnNumber:11},this),e.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No figures found"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:324,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"There are no figures in the database yet. Check back later!"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:325,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:322,columnNumber:9},this),!m&&!N&&i.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:[j.map(s=>e.jsxDEV("div",{className:"mx-auto w-full max-w-sm",children:e.jsxDEV(R,{figure:s,onSaveFigureClick:()=>C(s),onLikeFigureClick:$,onLoginClick:F,isSaved:S(s),isLiked:A(s)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:337,columnNumber:17},this)},`${s._id||s.wikipediaId}-${s.category}`,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:336,columnNumber:15},this)),j.length===0&&e.jsxDEV("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-gray-400 text-4xl mb-4",children:"üîç"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:351,columnNumber:17},this),e.jsxDEV("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"No figures in this category"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:352,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-500",children:"Try selecting a different category to explore more figures."},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:353,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:350,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:334,columnNumber:11},this),f&&e.jsxDEV("div",{className:"text-center mt-6 sm:mt-8",children:e.jsxDEV("button",{onClick:_,disabled:x,className:"bg-secondary text-dark px-6 sm:px-8 py-3 rounded-lg hover:bg-opacity-80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-md text-sm sm:text-base min-h-[44px]",children:x?e.jsxDEV("span",{className:"flex items-center justify-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-dark mr-3"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:368,columnNumber:21},this),"Loading more..."]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:367,columnNumber:19},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"hidden sm:inline",children:"Load More Figures"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:373,columnNumber:21},this),e.jsxDEV("span",{className:"sm:hidden",children:"Load More"},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:374,columnNumber:21},this),e.jsxDEV("span",{className:"ml-2 bg-dark bg-opacity-20 px-2 py-1 rounded text-xs sm:text-sm",children:[(((V=a[t])==null?void 0:V.length)||0)-h," remaining"]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:372,columnNumber:19},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:361,columnNumber:15},this)},void 0,!1,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:360,columnNumber:13},this),e.jsxDEV("div",{className:"text-center mt-6 space-y-2",children:[e.jsxDEV("div",{className:"text-sm text-gray-500",children:["Showing ",j.length," of ",((U=a[t])==null?void 0:U.length)||0," figures",t!=="all"&&` in ${t}`]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:386,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:["üí° Dev Mode: Total cached figures: ",i.length]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:391,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:385,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:333,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/peanut/Development/TripleTen/projects/diasporaecho/client/src/components/Echoes/Echoes.jsx",lineNumber:224,columnNumber:5},this)}export{O as default};
